{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports:[\n    LoginPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { \n  IonicPage, \n  NavController, \n  MenuController,\n  Events,\n  Platform\n} from 'ionic-angular';\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\nimport { ToolsProvider } from '../../providers/tools/tools';\nimport { LoginProvider } from '../../providers/login/login';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  private formLogin: FormGroup;\n  private ipAdr: any;\n\n  constructor(\n    public fb:FormBuilder, \n    public navCtrl: NavController, \n    public menu: MenuController,\n    public tool: ToolsProvider,\n    public lgn: LoginProvider,\n    public ev: Events,\n    public platform: Platform\n  ) {\n    this.formLogin = this.fb.group({\n      clientId:['', Validators.required],\n      password:['', Validators.required],\n    });  \n    this.menu.enable(false); \n  }\n  \n  ionViewDidLoad(){\n    this.platform.ready().then(()=>{\n      this.checkLogin();\n      this.tool.setStg('net',{conn: null});\n      this.tool.getStg('ip').then(\n        (data)=>{\n          if(data){\n            this.ipAdr = data.ip;\n          }else{\n            this.lgn.getIp().subscribe(\n              data=>{\n                // console.log('get ip',data);\n                let res: any;\n                res = data;\n                this.ipAdr = res.ip;\n                this.tool.setStg('ip',data).then();\n              },\n              err=>{\n                console.log('error', err);\n              }\n            );\n          }\n        }\n      );\n    });\n  }\n\n  checkLogin(){\n    this.tool.getStg('login').then(\n      (data)=>{\n        if(data){\n          let save ={clientId: data.clientId, level: data.level, nama: data.nama};\n          this.publishUser(save);\n          if(data.level==='1'){\n            this.navCtrl.setRoot('AdminPage');\n          }else{\n            this.navCtrl.setRoot('HomePage');          \n          }\n        }\n      },\n      error=>{\n        console.log('Login-> getStgLogin()',error);\n      }\n    );\n  }\n\n  doLogin(){\n    this.tool.showLoading();\n    this.tool.getStg('net').then(\n      (data)=>{\n        if(data.conn!=\"ofline\"){\n          this.login();\n        }else{\n          this.tool.showAlert('Error','tidak ditemukan jaringan internet');\n          this.tool.stopLoading();\n        }\n      },\n      error=>{\n        console.log('Login-> doLogin()',error);\n        this.tool.stopLoading();\n      }\n    );\n  }\n  \n  publishUser(data:any){\n    this.ev.publish('user', data);\n  }\n\n  login(){\n    this.lgn.getData(this.formLogin.value.clientId,this.formLogin.value.password ).subscribe(\n      data=>{\n        let res: any;\n        res = data;\n        this.tool.stopLoading();\n        if(res.result==\"1\"){\n          if(res.auth){\n            let save ={clientId: res.clientId, level: res.level, nama: res.nama};\n            this.publishUser(save);\n            this.lgn.logger(this.formLogin.value.clientId,'Berhasil Login', this.ipAdr).subscribe();\n            this.tool.setStg('login',save).then(\n              ()=>{\n                let alrt = this.tool.setAlert('Login', 'Selamat Datang '+res.nama);\n                alrt.present();\n                alrt.onDidDismiss(()=>{\n                  this.menu.enable(true);\n                  if(res.level==='1'){\n                    this.navCtrl.setRoot('AdminPage');                  \n                  }else{\n                    this.navCtrl.setRoot('HomePage');\n                  }\n                });\n              },\n              error=>{\n                console.log('error storing data',error);\n              }\n            );\n            this.lgn.getValidasi(this.formLogin.value.clientId).subscribe(\n              data=>{\n                this.tool.setStg('porto',{clientId:data.clientId, nama: data.nama, qty: data.bbca});\n              },\n              err=>{\n                console.log('error storing data 2',err);\n              }\n            );\n          }else{\n            this.lgn.logger(this.formLogin.value.clientId,'Mencoba login tapi password salah', this.ipAdr).subscribe();            \n            this.tool.showAlert('Login', 'Password Salah');\n          }\n        }else{\n          this.lgn.logger(this.formLogin.value.clientId,'Mencoba login tapi belum terdaftar', this.ipAdr).subscribe();\n          this.tool.showAlert('Login', 'User ID['+this.formLogin.value.clientId+'] belum terdaftar, <br>silahkan mendaftar terlebih dahulu');          \n        }\n      },\n      err=>{\n        console.log('Login -> login()',err);\n      }\n    );\n  }\n\n  goToRegis(){\n    this.navCtrl.push('RegisterPage');\n  }\n\n  gotoGooglePlay(){\n    window.open('https://play.google.com/store/apps/details?id=bcas.it5.formbbca');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}