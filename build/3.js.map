{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n  ],\r\n  exports:[\r\n    HomePage\r\n  ]\r\n})\r\nexport class LoginPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { NavController, MenuController, IonicPage, Platform } from 'ionic-angular';\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\nimport { MarketProvider } from '../../providers/market/market';\nimport { ToolsProvider } from '../../providers/tools/tools';\nimport { LoginProvider } from '../../providers/login/login';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n  private oForm: boolean;\n  private oRule: boolean;\n  private formJual: FormGroup;\n  private clientId: string;\n  private code: string;\n  private prevPrice: string ;\n  private maxLbr: string ;\n  private time: number;\n  private dow: number;\n  private holiday: boolean=false;\n  private aturan: any;\n  private ipAdr:any;\n\n  constructor(\n    public fb:FormBuilder, \n    public navCtrl: NavController,\n    public menu: MenuController,   \n    public mkt: MarketProvider,\n    public tool: ToolsProvider,\n    public lgn: LoginProvider,\n    public platform: Platform\n  ) {\n    this.menu.enable(true);\n    this.oRule = false;\n    this.oForm = true;\n    this.formJual = this.fb.group({\n      jumlah:['', Validators.required],\n      harga:['', Validators.required],\n    });\n  }\n  \n  ionViewDidLoad(){\n    this.platform.ready().then(()=>{\n      this.setTanggal();\n      this.checkLogin();\n      this.getPrevPrice();    \n      this.tool.getStg('aturan').then(\n        (rslt)=>{\n          if(rslt){\n            this.aturan = rslt;\n          }else{\n            this.getAturan();\n          }\n        },er=>{\n          this.getAturan();\n        }\n      );\n    });\n  }\n\n  setTanggal(){\n    this.dow = new Date().getDay();\n    this.time = new Date().getUTCHours()+7;\n    let dy = new Date().getDate().toString();\n    if (dy.length < 2) dy = '0'+dy;\n    let mo = (new Date().getMonth()+1).toString();\n    if (mo.length < 2) mo = '0'+mo;    \n    let yr = new Date().getFullYear();\n    let tgl = yr+'-'+mo+'-'+dy\n    this.lgn.getHoliday(tgl).subscribe(\n      data=>{\n        if(data.result ==='1')this.holiday = true;\n      }\n    );\n  }\n\n  checkLogin(){\n    this.tool.getStg('login').then(\n      (data)=>{\n        if(data && data.level==='0'){ \n          this.clientId = data.clientId;\n          this.tool.getStg('ip').then(\n            (data)=>{\n              if(data){\n                this.ipAdr = data.ip;\n                this.lgn.logger(this.clientId,'Masuk halaman penjualan',this.ipAdr).subscribe();\n              }\n            }\n          );\n          \n        }else{\n          this.navCtrl.setRoot('LoginPage');\n        }\n      },\n      err=>{\n        console.log('Home->getLoginStg()', err);\n      }\n    ); \n  }\n\n  getAturan(){\n    this.mkt.getAturanWeb().subscribe(\n      res=>{\n        this.aturan = res;\n        this.tool.setStg('aturan',res).then();\n      },\n      error=>{\n        console.log('getAturan', error);\n      }\n    );\n  }\n\n  getPrevPrice(){\n    let today = new Date();\n    let dd = today.getDate();\n    this.tool.showLoading();\n    this.tool.getStg('price').then((data)=>{\n      if((data && typeof(data) !== \"undefined\")&& data.dd === dd){\n        this.code = data.code;\n        this.prevPrice = data.prevPrice;\n        this.tool.getStg('porto').then(res=>{\n          this.maxLbr = res.qty;\n        });\n        this.tool.stopLoading();\n      }else{\n        this.reqPrevPrice(dd);    \n      }\n    },err=>{\n      console.log('Home-> getPrevPrice()', err);\n      if(err.code===2){\n        this.reqPrevPrice(dd);            \n      }\n    });\n  }\n\n  reqPrevPrice(dd){\n    this.mkt.getBBCA().subscribe(\n      data=>{\n        this.code = data.kode;\n        this.prevPrice = data.harga;\n        this.tool.setStg('price',{code:data.kode, prevPrice: data.harga, dd: dd});\n        this.lgn.getValidasi(this.clientId).subscribe(\n          res=>{\n            this.maxLbr = res.bbca;\n            this.tool.setStg('porto',{clientId:res.clientId, nama: res.nama, qty: res.bbca});\n          },\n          err=>{\n            console.log('error storing data 2',err);\n          }\n        );\n\n        this.tool.stopLoading();\n      },\n      err=>{\n        console.log('Home->reqPrevPrice()',err);\n        this.tool.stopLoading();\n      }\n    );\n  }\n\n  doJual(){\n    this.tool.showLoading()\n    this.tool.getStg('net').then(\n      data=>{\n        if(data.conn!=\"offline\"){\n          this.jual();        \n        }else{\n          this.tool.showAlert('Error','tidak ditemukan jaringan internet');\n          this.tool.stopLoading();\n        }\n      },\n      error=>{\n        console.log('Home->doJual()',error);\n        this.tool.stopLoading();\n      }\n    );\n  }\n\n  jual(){\n    if(this.validasiJual()){\n      this.mkt.jual(this.clientId, this.formJual.value.jumlah, this.formJual.value.harga)\n      .subscribe(\n        data=>{\n          let res = data;\n          this.tool.stopLoading();\n          if(res.result == '1'){\n            this.lgn.logger(this.clientId,'Berhasil jual sejumlah['+this.formJual.value.jumlah+'] di harga['+this.formJual.value.harga+']',this.ipAdr).subscribe();\n            this.tool.showAlert('Berhasil',res.message);\n          }else{\n            this.tool.showAlert('Gagal', res.message);\n          }\n        },\n        error=>{\n          console.log('Home->jual()',error);\n        }\n      );\n    }\n  }\n\n  validasiJual():boolean{\n    let res = true;\n      if(!this.checkHariLibur())res=false;\n      else \n        if (!this.checkWaktu())res=false;\n      else \n        if (!this.checkFraksi())res=false;\n      else \n        if (!this.checkJumlah())res=false;\n    return res;\n  }\n  \n  checkHariLibur():boolean{\n    let res = true;\n    if(this.holiday || this.dow === 6 || this.dow === 0 ){\n      res=false;\n      this.lgn.logger(this.clientId,'Mencoba Jual Tapi ditolak karena libur ',this.ipAdr).subscribe();\n      this.tool.showAlert('Info', 'Tidak bisa mengirim form di hari libur');\n      this.tool.stopLoading();\n    }\n    return res;\n  }\n\n  checkWaktu():boolean{\n    let res = true;\n    if(this.time > 14 || this.time < 6){\n      res = false;\n      this.lgn.logger(this.clientId,'Mencoba jual tapi ditolak karena melebihi batas waktu['+this.time+']',this.ipAdr).subscribe();\n      this.tool.showAlert('Info', 'Penjualan saham melalui E-Form hanya bisa dilakukan jam 06.00 - 15.00 WIB');\n      this.tool.stopLoading();\n    }\n    return res;\n  }\n\n\n  checkFraksi():boolean{\n    let res = true;\n    if(!(parseInt(this.formJual.value.harga)%25 === 0)){\n      res = false;\n      this.lgn.logger(this.clientId,'Mencoba jual tapi ditolak karena fraksi harga tidak sesuai ['+this.formJual.value.harga+']',this.ipAdr).subscribe();\n      this.tool.showAlert('Info', 'Harga jual harus kelipatan Rp 25,-');\n      this.tool.stopLoading();\n    }\n    return res;\n  }\n\n  checkJumlah():boolean{\n    let res = true;\n    if(!(parseInt(this.formJual.value.jumlah) <= parseInt(this.maxLbr))){\n      res = false;\n      this.lgn.logger(this.clientId,'Mencoba jual tapi ditolak karena Jumlah ['+this.formJual.value.jumlah+'] lebih besar dari max ['+this.maxLbr+']',this.ipAdr).subscribe();\n      this.tool.showAlert('Info', 'Jumlah efek yang dijual tidak boleh lebih besar dari jumlah efek yang tersedia');\n      this.tool.stopLoading();\n    }else if((parseInt(this.formJual.value.jumlah) <= 100)){\n      res = false;\n      this.lgn.logger(this.clientId,'Mencoba jual tapi ditolak karena Jumlah ['+this.formJual.value.jumlah+'] kurang dari 100 ',this.ipAdr).subscribe();\n      this.tool.showAlert('Info', 'Jumlah efek yang dijual tidak boleh kurang dari 100 lembar');\n      this.tool.stopLoading();\n    }\n    return res;\n  }\n\n  openForm(){\n    this.oForm = !this.oForm;\n    this.oRule = false;\n  }\n\n  openRule(){\n    this.oForm = false;\n    this.oRule = !this.oRule;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}